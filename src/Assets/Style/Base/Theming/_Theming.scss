/* ========================================== */
/* ================ THEMING SYSTEM ========== */
/* ========================================== */
/* Best Practice: Modulares, wartbares Theme-Management */

/* ========================================== */
// Theme Configuration Map - Zentrale Theme-Verwaltung
/* ========================================== */

$themes: (
    'light': ('primary': $blue-600,
        'primary-hover': $blue-700,
        'primary-active': $blue-800,
        'secondary': $gray-100,
        'accent': $cyan-500,

        'background': $white,
        'background-secondary': $gray-50,
        'background-tertiary': $gray-100,
        'surface': $white,
        'surface-secondary': $gray-50,

        'text-primary': $gray-900,
        'text-secondary': $gray-600,
        'text-tertiary': $gray-400,
        'text-inverse': $white,

        'border': $gray-200,
        'border-secondary': $gray-300,
        'divider': $gray-100,

        'shadow': $shadow-base,
        'shadow-hover': $shadow-md,
        'glow': none,
    ),

    'dark': ('primary': $blue-500,
        'primary-hover': $blue-400,
        'primary-active': $blue-300,
        'secondary': $gray-800,
        'accent': $cyan-400,

        'background': $gray-950,
        'background-secondary': $gray-900,
        'background-tertiary': $gray-800,
        'surface': $gray-900,
        'surface-secondary': $gray-800,

        'text-primary': $gray-100,
        'text-secondary': $gray-300,
        'text-tertiary': $gray-500,
        'text-inverse': $gray-900,

        'border': $gray-700,
        'border-secondary': $gray-600,
        'divider': $gray-800,

        'shadow': 0 25px 50px -12px rgba(0, 0, 0, 0.5),
        'shadow-hover': 0 25px 50px -12px rgba(0, 0, 0, 0.7),
        'glow': $glow-blue,
    ),

    'purple': ('primary': $purple-600,
        'primary-hover': $purple-700,
        'primary-active': $purple-800,
        'secondary': $purple-100,
        'accent': $purple-400,

        'background': $white,
        'background-secondary': $purple-50,
        'background-tertiary': $purple-100,
        'surface': $white,
        'surface-secondary': $purple-50,

        'text-primary': $gray-900,
        'text-secondary': $purple-600,
        'text-tertiary': $purple-400,
        'text-inverse': $white,

        'border': $purple-200,
        'border-secondary': $purple-300,
        'divider': $purple-100,

        'shadow': 0 4px 12px rgba($purple-600, 0.15),
        'shadow-hover': 0 8px 25px rgba($purple-600, 0.2),
        'glow': $glow-purple,
    ),

    'red': ('primary': $red-600,
        'primary-hover': $red-700,
        'primary-active': $red-800,
        'secondary': $red-100,
        'accent': $orange-500,

        'background': $white,
        'background-secondary': $red-50,
        'background-tertiary': $red-100,
        'surface': $white,
        'surface-secondary': $red-50,

        'text-primary': $gray-900,
        'text-secondary': $red-600,
        'text-tertiary': $red-400,
        'text-inverse': $white,

        'border': $red-200,
        'border-secondary': $red-300,
        'divider': $red-100,

        'shadow': 0 4px 12px rgba($red-600, 0.15),
        'shadow-hover': 0 8px 25px rgba($red-600, 0.2),
        'glow': $glow-red,
    ),

    'olive': ('primary': $olive-600,
        'primary-hover': $olive-700,
        'primary-active': $olive-800,
        'secondary': $olive-100,
        'accent': $green-500,

        'background': $olive-50,
        'background-secondary': $olive-100,
        'background-tertiary': $olive-200,
        'surface': $white,
        'surface-secondary': $olive-50,

        'text-primary': $olive-900,
        'text-secondary': $olive-600,
        'text-tertiary': $olive-400,
        'text-inverse': $white,

        'border': $olive-200,
        'border-secondary': $olive-300,
        'divider': $olive-100,

        'shadow': 0 4px 12px rgba($olive-600, 0.1),
        'shadow-hover': 0 8px 25px rgba($olive-600, 0.15),
        'glow': none,
    )
);

/* ========================================== */
// Theme Mixin - Automatische Theme-Generierung
/* ========================================== */

@mixin theme($theme-name) {
    $theme-map: map-get($themes, $theme-name);

    @if $theme-map {

        &[data-theme="#{$theme-name}"],
        .theme-#{$theme-name} & {
            @each $property, $value in $theme-map {
                --color-#{$property}: #{$value};
            }

            @content;
        }
    }
}

@mixin all-themes {
    @each $theme-name, $theme-map in $themes {
        @include theme($theme-name) {
            @content;
        }
    }
}

/* ========================================== */
// Semantic Token System - CSS Custom Properties
/* ========================================== */

:root {
    // Default Theme (Light)
    $light-theme: map-get($themes, 'light');

    @each $property, $value in $light-theme {
        --color-#{$property}: #{$value};
    }

    // Component-specific tokens
    --color-nav-bg: var(--color-surface);
    --color-nav-text: var(--color-text-primary);
    --color-nav-text-hover: var(--color-primary);
    --color-nav-border: var(--color-border);

    --color-header-bg: var(--color-surface);
    --color-header-text: var(--color-text-primary);
    --color-header-border: var(--color-border);

    --color-footer-bg: var(--color-background-tertiary);
    --color-footer-text: var(--color-text-secondary);
    --color-footer-border: var(--color-border);

    --color-sidebar-bg: var(--color-background-secondary);
    --color-sidebar-text: var(--color-text-primary);
    --color-sidebar-border: var(--color-border);

    --color-card-bg: var(--color-surface);
    --color-card-border: var(--color-border);
    --shadow-card: var(--shadow);
    --shadow-card-hover: var(--shadow-hover);

    // Button tokens
    --color-btn-primary-bg: var(--color-primary);
    --color-btn-primary-bg-hover: var(--color-primary-hover);
    --color-btn-primary-bg-active: var(--color-primary-active);
    --color-btn-primary-text: var(--color-text-inverse);
    --color-btn-primary-border: var(--color-primary);

    --color-btn-secondary-bg: var(--color-secondary);
    --color-btn-secondary-bg-hover: var(--color-border-secondary);
    --color-btn-secondary-text: var(--color-text-primary);
    --color-btn-secondary-border: var(--color-border);

    --color-btn-ghost-bg: transparent;
    --color-btn-ghost-bg-hover: var(--color-secondary);
    --color-btn-ghost-text: var(--color-text-primary);
    --color-btn-ghost-border: transparent;

    // Form tokens
    --color-input-bg: var(--color-surface);
    --color-input-text: var(--color-text-primary);
    --color-input-border: var(--color-border);
    --color-input-border-focus: var(--color-primary);
    --color-input-placeholder: var(--color-text-tertiary);

    // Status colors
    --color-success: #{$success};
    --color-success-bg: #{$success-50};
    --color-warning: #{$warning};
    --color-warning-bg: #{$warning-50};
    --color-error: #{$error};
    --color-error-bg: #{$error-50};
    --color-info: #{$info};
    --color-info-bg: #{$info-50};

    // Special effects
    --border-radius-default: #{$radius-lg};
    --transition-theme: background-color 300ms ease-out,
    color 300ms ease-out,
    border-color 300ms ease-out;
}

/* ========================================== */
// Theme Application - Alle Themes generieren
/* ========================================== */

@each $theme-name, $theme-map in $themes {

    [data-theme="#{$theme-name}"],
    .theme-#{$theme-name} {
        @each $property, $value in $theme-map {
            --color-#{$property}: #{$value};
        }

        // Theme-spezifische Optimierungen
        @if $theme-name =='dark' {
            color-scheme: dark;

            // Enhanced shadows für dark theme
            --shadow-card: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-card-hover: 0 25px 50px -12px rgba(0, 0, 0, 0.4);

            // Glow effects aktivieren
            @if $enable-glow-effects {
                --glow-enabled: 1;
            }
        }

        @if $theme-name =='light' {
            color-scheme: light;
            --glow-enabled: 0;
        }

        @if $theme-name =='purple' {
            --border-radius-default: #{$radius-xl};
            --transition-theme: all 400ms #{$ease-bounce};
        }

        @if $theme-name =='red' {
            --border-radius-default: #{$radius-sm};
            --transition-theme: all 200ms #{$ease-in-out};
        }

        @if $theme-name =='olive' {
            --border-radius-default: #{$radius-lg};
            --shadow: 0 4px 12px rgba(107, 124, 50, 0.1);
        }
    }
}

/* ========================================== */
// Font Theme Integration
/* ========================================== */

// Default Font Theme
.font-theme-default {
    --font-family-primary: #{$font-family-sans};
    --font-family-display: #{$font-family-display};
    --font-family-mono: #{$font-family-mono};
}

// Future Font Theme
.font-theme-future {
    --font-family-primary: #{$font-family-future};
    --font-family-display: #{$font-family-future};
    --font-family-mono: #{$font-family-mono};

    // Enhanced glow for future theme
    @if $enable-glow-effects {
        --glow-effect: #{$glow-cyan};

        // Futuristic text shadow
        --text-glow: 0 0 10px currentColor;
    }
}

// Vintage Font Theme
.font-theme-vintage {
    --font-family-primary: #{$font-family-vintage};
    --font-family-display: #{$font-family-vintage};
    --font-family-mono: #{$font-family-mono};

    // Softer shadows for vintage
    --shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    --shadow-hover: 0 8px 16px rgba(0, 0, 0, 0.15);
    --glow-effect: none;
}

/* ========================================== */
// Dynamic Theme Functions (für JavaScript Integration)
/* ========================================== */

// Theme Utility Classes
.theme-transition {
    transition: background-color $duration-300 $ease-out,
        color $duration-300 $ease-out,
        border-color $duration-300 $ease-out,
        box-shadow $duration-300 $ease-out;
}

// Glow Toggle
.glow-enabled {
    --enable-glow: 1;
}

.glow-disabled {
    --enable-glow: 0;
    --glow-effect: none;
}

/* ========================================== */
// Theme-aware Components Base Classes
/* ========================================== */

.theme-surface {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
}

.theme-background {
    background-color: var(--color-background);
    color: var(--color-text-primary);
}

.theme-card {
    background-color: var(--color-card-bg);
    color: var(--color-text-primary);
    border: 1px solid var(--color-card-border);
    box-shadow: var(--shadow-card);
    border-radius: var(--border-radius-default);

    &:hover {
        box-shadow: var(--shadow-card-hover);
    }
}

/* ========================================== */
// Theme-specific Component Styles
/* ========================================== */

// Buttons mit Theme-Unterstützung
.btn {
    border-radius: var(--border-radius-default);
    transition: var(--transition-theme);

    &.btn-primary {
        background-color: var(--color-btn-primary-bg);
        color: var(--color-btn-primary-text);
        border-color: var(--color-btn-primary-border);

        &:hover {
            background-color: var(--color-btn-primary-bg-hover);
        }

        &:active {
            background-color: var(--color-btn-primary-bg-active);
        }

        // Glow effect für futuristische Themes
        .font-theme-future & {
            box-shadow: var(--glow-effect, none);
        }
    }

    &.btn-secondary {
        background-color: var(--color-btn-secondary-bg);
        color: var(--color-btn-secondary-text);
        border-color: var(--color-btn-secondary-border);

        &:hover {
            background-color: var(--color-btn-secondary-bg-hover);
        }
    }

    &.btn-ghost {
        background-color: var(--color-btn-ghost-bg);
        color: var(--color-btn-ghost-text);
        border-color: var(--color-btn-ghost-border);

        &:hover {
            background-color: var(--color-btn-ghost-bg-hover);
        }
    }
}

// Form Elements mit Theme-Unterstützung
.form-input {
    background-color: var(--color-input-bg);
    color: var(--color-input-text);
    border-color: var(--color-input-border);
    border-radius: var(--border-radius-default);
    transition: var(--transition-theme);

    &:focus {
        border-color: var(--color-input-border-focus);
        box-shadow: 0 0 0 3px var(--color-primary-50, rgba(var(--color-primary), 0.1));
    }

    &::placeholder {
        color: var(--color-input-placeholder);
    }
}

// Navigation mit Theme-Unterstützung
.nav {
    background-color: var(--color-nav-bg);
    border-color: var(--color-nav-border);

    .nav-link {
        color: var(--color-nav-text);
        transition: var(--transition-theme);

        &:hover {
            color: var(--color-nav-text-hover);
        }
    }
}

/* ========================================== */
// Media Query Theme Preferences
/* ========================================== */

// Auto Dark Mode
@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        $dark-theme: map-get($themes, 'dark');

        @each $property, $value in $dark-theme {
            --color-#{$property}: #{$value};
        }

        color-scheme: dark;
    }
}

// Auto Light Mode
@media (prefers-color-scheme: light) {
    :root:not([data-theme]) {
        $light-theme: map-get($themes, 'light');

        @each $property, $value in $light-theme {
            --color-#{$property}: #{$value};
        }

        color-scheme: light;
    }
}

// High Contrast Mode
@media (prefers-contrast: high) {
    :root {
        --color-border: #{$black};
        --color-text-primary: #{$black};
        --color-background: #{$white};
        --shadow: none;
        --glow-effect: none;
    }

    [data-theme="dark"] {
        --color-border: #{$white};
        --color-text-primary: #{$white};
        --color-background: #{$black};
    }
}

// Reduced Motion
@media (prefers-reduced-motion: reduce) {
    :root {
        --transition-theme: none;
    }

    .theme-transition {
        transition: none !important;
    }
}

/* ========================================== */
// Theme JavaScript Integration Helper
/* ========================================== */

// Theme-Switch Animation
.theme-switching {
    transition: none !important;

    * {
        transition: none !important;
    }
}

// Theme loaded indicator
.theme-loaded {
    transition: var(--transition-theme);
}

/* ========================================== */
// Print Theme Overrides
/* ========================================== */

@media print {
    :root {
        --color-background: #{$white} !important;
        --color-text-primary: #{$black} !important;
        --color-border: #{$black} !important;
        --shadow: none !important;
        --glow-effect: none !important;
    }
}