/* ========================================== */
/* ============== DARK THEME ================ */
/* ========================================== */
/* Modernes Dark Theme mit Neon-Akzenten */

// WICHTIG: Variablen importieren
@use "../Variables" as *;

/* ========================================== */
// Dark Theme Konfiguration
/* ========================================== */

[data-theme="dark"],
.theme-dark {
    color-scheme: dark;

    /* ========================================== */
    // Base Colors - Dark Mode Foundation
    /* ========================================== */

    // Backgrounds - Tiefe, dunkle Töne
    --color-background: #{$gray-950};
    --color-background-secondary: #{$gray-900};
    --color-background-tertiary: #{$gray-800};
    --color-surface: #{$gray-900};
    --color-surface-secondary: #{$gray-800};
    --color-surface-elevated: #{$gray-800};

    // Text Colors - Helle Kontraste
    --color-text-primary: #{$gray-100};
    --color-text-secondary: #{$gray-300};
    --color-text-tertiary: #{$gray-500};
    --color-text-inverse: #{$gray-900};
    --color-text-muted: #{$gray-400};
    --color-text-disabled: #{$gray-600};

    // Primary Colors - Heller für Kontrast
    --color-primary: #{$blue-500};
    --color-primary-hover: #{$blue-400};
    --color-primary-active: #{$blue-300};
    --color-primary-50: #{rgba($blue-500, 0.05)};
    --color-primary-100: #{rgba($blue-500, 0.1)};
    --color-primary-200: #{rgba($blue-500, 0.2)};

    // Secondary Colors
    --color-secondary: #{$gray-800};
    --color-secondary-hover: #{$gray-700};
    --color-secondary-active: #{$gray-600};

    // Accent Colors - Cyan für Sci-Fi Look
    --color-accent: #{$cyan-400};
    --color-accent-hover: #{$cyan-300};
    --color-accent-active: #{$cyan-200};

    // Borders - Subtile dunkle Linien
    --color-border: #{$gray-700};
    --color-border-secondary: #{$gray-600};
    --color-border-focus: #{$blue-400};
    --color-divider: #{$gray-800};

    // Semantic Colors - Angepasst für Dark Mode
    --color-success: #{$green-400};
    --color-warning: #{$yellow-400};
    --color-error: #{$red-400};
    --color-info: #{$blue-400};

    // Status Backgrounds
    --color-success-bg: #{rgba($green-400, 0.1)};
    --color-warning-bg: #{rgba($yellow-400, 0.1)};
    --color-error-bg: #{rgba($red-400, 0.1)};
    --color-info-bg: #{rgba($blue-400, 0.1)};

    // Status Text Colors
    --color-success-text: #{$green-300};
    --color-warning-text: #{$yellow-300};
    --color-error-text: #{$red-300};
    --color-info-text: #{$blue-300};

    /* ========================================== */
    // Shadows & Effects - Dark Mode optimiert
    /* ========================================== */

    --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    --shadow-hover: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
    --shadow-focus: 0 0 0 3px #{rgba($blue-500, 0.3)};
    --shadow-card: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    --shadow-card-hover: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
    --shadow-modal: 0 40px 80px rgba(0, 0, 0, 0.6);

    // Glow Effects - Aktiviert für Dark Theme
    --glow-effect: #{$glow-blue};
    --text-glow: 0 0 10px #{rgba($blue-400, 0.5)};

    /* ========================================== */
    // Component Colors - Dark Theme spezifisch
    /* ========================================== */

    // Navigation - Dunkle Kopfzeile
    --color-nav-bg: #{rgba($gray-900, 0.95)};
    --color-nav-text: #{$gray-300};
    --color-nav-text-hover: #{$blue-400};
    --color-nav-text-active: #{$blue-300};
    --color-nav-border: #{$gray-700};
    --color-nav-backdrop: #{rgba($gray-950, 0.9)};

    // Header
    --color-header-bg: #{$gray-900};
    --color-header-text: #{$gray-100};
    --color-header-text-secondary: #{$gray-300};
    --color-header-border: #{$gray-700};

    // Footer
    --color-footer-bg: #{$gray-950};
    --color-footer-text: #{$gray-300};
    --color-footer-text-secondary: #{$gray-500};
    --color-footer-border: #{$gray-800};

    // Sidebar
    --color-sidebar-bg: #{rgba($gray-900, 0.8)};
    --color-sidebar-text: #{$gray-300};
    --color-sidebar-text-hover: #{$blue-400};
    --color-sidebar-border: #{$gray-700};
    --color-sidebar-active: #{rgba($blue-500, 0.2)};

    // Cards
    --color-card-bg: #{$gray-900};
    --color-card-bg-hover: #{$gray-800};
    --color-card-border: #{$gray-700};
    --color-card-border-hover: #{$gray-600};

    /* ========================================== */
    // Buttons - Dark Theme optimiert
    /* ========================================== */

    // Primary Button
    --color-btn-primary-bg: #{$blue-500};
    --color-btn-primary-bg-hover: #{$blue-400};
    --color-btn-primary-bg-active: #{$blue-300};
    --color-btn-primary-text: #{$gray-900};
    --color-btn-primary-border: #{$blue-500};

    // Secondary Button
    --color-btn-secondary-bg: #{$gray-800};
    --color-btn-secondary-bg-hover: #{$gray-700};
    --color-btn-secondary-bg-active: #{$gray-600};
    --color-btn-secondary-text: #{$gray-300};
    --color-btn-secondary-border: #{$gray-700};

    // Ghost Button
    --color-btn-ghost-bg: transparent;
    --color-btn-ghost-bg-hover: #{rgba($blue-500, 0.1)};
    --color-btn-ghost-text: #{$blue-400};
    --color-btn-ghost-text-hover: #{$blue-300};
    --color-btn-ghost-border: transparent;

    // Danger Button
    --color-btn-danger-bg: #{$red-500};
    --color-btn-danger-bg-hover: #{$red-400};
    --color-btn-danger-text: #{$white};

    /* ========================================== */
    // Forms - Dark Mode optimiert
    /* ========================================== */

    --color-input-bg: #{$gray-800};
    --color-input-text: #{$gray-100};
    --color-input-border: #{$gray-600};
    --color-input-border-focus: #{$blue-400};
    --color-input-placeholder: #{$gray-500};
    --color-input-disabled-bg: #{$gray-900};
    --color-input-disabled-text: #{$gray-600};

    /* ========================================== */
    // Interactive States - Dark Mode
    /* ========================================== */

    // Hover States
    --hover-overlay: #{rgba($blue-500, 0.08)};
    --hover-lift-shadow: var(--shadow-hover);

    // Active States
    --active-overlay: #{rgba($blue-500, 0.15)};
    --active-scale: 0.98;

    // Focus States
    --focus-ring: 0 0 0 2px #{rgba($blue-500, 0.4)};
    --focus-ring-offset: 2px;

    // Disabled States
    --disabled-opacity: 0.5;
    --disabled-cursor: not-allowed;

    /* ========================================== */
    // Animation & Transition
    /* ========================================== */

    --transition-theme: background-color 300ms #{$ease-out},
    color 300ms #{$ease-out},
    border-color 300ms #{$ease-out},
    box-shadow 300ms #{$ease-out};

    --transition-glow: box-shadow 400ms #{$ease-out};
    --transition-neon: all 300ms #{$ease-out};

    /* ========================================== */
    // Special Dark Theme Elements
    /* ========================================== */

    // Neon Colors
    --neon-blue: #{$cyan-400};
    --neon-purple: #{$purple-400};
    --neon-green: #{$green-400};
    --neon-pink: #{$pink-400};

    // Gradients - Cyber/Sci-Fi
    --gradient-cyber: linear-gradient(135deg, #{$blue-500} 0%, #{$cyan-400} 50%, #{$purple-500} 100%);
    --gradient-neon: linear-gradient(45deg, #{$cyan-400} 0%, #{$blue-500} 50%, #{$purple-500} 100%);
    --gradient-matrix: linear-gradient(180deg, #{$green-400} 0%, #{$cyan-400} 100%);

    // Backdrop Effects
    --backdrop-filter: blur(20px) saturate(180%);
    --backdrop-filter-strong: blur(40px) saturate(200%);
}

/* ========================================== */
// Dark Theme Component Enhancements
/* ========================================== */

[data-theme="dark"] {

    // Enhanced image contrast in dark mode
    img {
        opacity: 0.9;
        transition: opacity $duration-200 $ease-out;

        &:hover {
            opacity: 1;
        }
    }

    // Code blocks in dark theme
    pre,
    code {
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--color-text-primary);
    }

    // Selection styling
    ::selection {
        background: rgba($blue-500, 0.3);
        color: var(--color-text-primary);
        text-shadow: none;
    }

    ::-moz-selection {
        background: rgba($blue-500, 0.3);
        color: var(--color-text-primary);
        text-shadow: none;
    }

    // Dark scrollbar styling
    ::-webkit-scrollbar {
        width: 12px;
        height: 12px;
    }

    ::-webkit-scrollbar-track {
        background: var(--color-background-secondary);
        border-radius: 6px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--color-border);
        border-radius: 6px;
        border: 2px solid var(--color-background-secondary);

        &:hover {
            background: var(--color-border-secondary);
        }
    }
}

/* ========================================== */
// Dark Theme Utilities
/* ========================================== */

.theme-dark {

    // Glow utilities
    .glow-primary {
        box-shadow: var(--glow-effect);
    }

    .glow-text {
        text-shadow: var(--text-glow);
    }

    // Neon effects
    .neon-border {
        border: 1px solid var(--neon-blue);
        box-shadow: 0 0 10px rgba($cyan-400, 0.5);
    }

    .cyber-card {
        background: var(--gradient-cyber);
        border: 1px solid var(--neon-blue);
        border-radius: $radius-lg;
        padding: $space-6;
        position: relative;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
    }

    @keyframes shimmer {
        0% {
            left: -100%;
        }

        100% {
            left: 100%;
        }
    }

    // Matrix effect
    .matrix-bg {
        background: var(--gradient-matrix);
        position: relative;

        &::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(circle at 25% 25%, #{rgba($green-400, 0.1)} 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, #{rgba($cyan-400, 0.1)} 0%, transparent 50%);
            animation: matrixPulse 4s ease-in-out infinite;
        }
    }

    @keyframes matrixPulse {

        0%,
        100% {
            opacity: 0.3;
        }

        50% {
            opacity: 0.6;
        }
    }

    // Glass morphism effects
    .glass-dark {
        background: rgba($gray-900, 0.7);
        backdrop-filter: var(--backdrop-filter);
        border: 1px solid rgba($gray-600, 0.3);
        border-radius: $radius-lg;
    }

    .frosted-dark {
        background: rgba($gray-800, 0.8);
        backdrop-filter: var(--backdrop-filter-strong);
        border: 1px solid rgba($gray-500, 0.2);
        border-radius: $radius-xl;
    }
}

/* ========================================== */
// Reduced Motion Support
/* ========================================== */

@media (prefers-reduced-motion: reduce) {
    .theme-dark {
        .cyber-card::before {
            animation: none;
        }

        .matrix-bg::after {
            animation: none;
        }

        --transition-glow: none;
        --transition-neon: none;
    }
}